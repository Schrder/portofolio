---
export interface Props {
  title: string;
  sizes: string;
  className: string;
}

const { title, sizes, className } = Astro.props;
const prefix = "/portofolio/assets";
const widths = [400, 800, 1200, 1600, 2000, 2400];

let srcsetAvif = "";
let srcsetJpeg = "";

widths.forEach((width) => {
  const variationName = `${prefix}/${title}_${width}px`;
  srcsetAvif += `${variationName}.avif ${width}w,`;
  srcsetJpeg += `${variationName}.jpeg ${width}w,`;
});

const fallbackImage = `${prefix}/${title}_800px.jpg`;
---

<style>
  img {
    width: 100%;
    height: 100%;
    object-fit: cover;

    /* Reset initistic image widths for css grid */
    min-width: 0;
    min-height: 0;

    border-radius: 8px;
    background-color: var(--variant-2);
    object-position: var(--photo-object-position, 50% 50%);
  }

  picture {
    grid-area: var(--photo-grid-area);
  }
</style>
<picture class={className}>
  <source type="image/avif" srcset={srcsetAvif} />
  <source type="image/jpeg" srcset={srcsetJpeg} />
  <img src={fallbackImage} alt={title} sizes={sizes} />
</picture>
